streamlit
openai
import streamlit as st
import openai

st.set_page_config(page_title="Chatbot Soáº¡n GiÃ¡o Ãn", page_icon="ğŸ“˜")

st.markdown("""
<h1 style='text-align:center; color:#2B5EA4;'>ğŸ¤– Chatbot Soáº¡n GiÃ¡o Ãn â€“ CTGDPT 2018</h1>
<p style='text-align:center;'>Há»— trá»£ soáº¡n bÃ i, yÃªu cáº§u cáº§n Ä‘áº¡t, nÄƒng lá»±c, pháº©m cháº¥t vÃ  cÃ¢u há»i váº­n dá»¥ng.</p>
""", unsafe_allow_html=True)

# ===== Äáº¦U VÃ€O =====
api_key = st.text_input("ğŸ”‘ Nháº­p API Key OpenAI:", type="password")
subject = st.text_input("ğŸ“˜ MÃ´n há»c:")
grade = st.text_input("ğŸ“ Lá»›p:")
topic = st.text_input("âœï¸ Chá»§ Ä‘á» / TÃªn bÃ i há»c:")

btn = st.button("Soáº¡n giÃ¡o Ã¡n")

# ===== HÃ€M SINH Ná»˜I DUNG =====
def generate_lesson(api_key, subject, grade, topic):
    openai.api_key = api_key

    prompt = f"""
Báº¡n lÃ  chuyÃªn gia soáº¡n giÃ¡o Ã¡n theo CTGDPT 2018.
HÃ£y soáº¡n Ä‘áº§y Ä‘á»§ cho bÃ i há»c sau:

MÃ´n: {subject}
Lá»›p: {grade}
BÃ i: {topic}

YÃŠU Cáº¦U:
1. Viáº¿t pháº§n I. YÃŠU Cáº¦U Cáº¦N Äáº T theo Ä‘Ãºng 3 má»©c:
- Nháº­n biáº¿t
- ThÃ´ng hiá»ƒu
- Váº­n dá»¥ng (gáº¯n vá»›i thá»±c tiá»…n)

2. NÄƒng lá»±c: 
- Gá»“m nÄƒng lá»±c chung
- NÄƒng lá»±c Ä‘áº·c thÃ¹ mÃ´n {subject}

3. Pháº©m cháº¥t:
- NhÃ¢n Ã¡i, trÃ¡ch nhiá»‡m, chÄƒm chá»‰, trung thá»±c, tá»± tin

4. Cuá»‘i bÃ i pháº£i cÃ³:
- CÃ¢u há»i váº­n dá»¥ng gáº¯n vá»›i thá»±c táº¿
"""

    response = openai.chat.completions.create(
        model="gpt-4.1",
        messages=[{"role":"user","content":prompt}],
        temperature=0.3
    )

    return response.choices[0].message["content"]

# ===== Xá»¬ LÃ =====
if btn:
    if api_key and subject and grade and topic:
        with st.spinner("â³ Äang soáº¡n bÃ i..."):
            output = generate_lesson(api_key, subject, grade, topic)
            st.success("ğŸ‰ HoÃ n thÃ nh!")
            st.write(output)
    else:
        st.error("âš ï¸ Vui lÃ²ng nháº­p Ä‘á»§ thÃ´ng tin.")
# ğŸ¤– Chatbot Soáº¡n GiÃ¡o Ãn â€“ CTGDPT 2018

Dá»± Ã¡n nÃ y cung cáº¥p chatbot giÃºp giÃ¡o viÃªn:
- Soáº¡n giÃ¡o Ã¡n nhanh
- ÄÃºng yÃªu cáº§u CTGDPT 2018
- CÃ³ nÄƒng lá»±c chung vÃ  Ä‘áº·c thÃ¹
- CÃ¢u há»i váº­n dá»¥ng gáº¯n vá»›i thá»±c táº¿

Cháº¡y online miá»…n phÃ­ báº±ng HuggingFace Spaces.
